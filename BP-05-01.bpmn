<?xml version="1.0" encoding="UTF-8"?>
<bpmn:definitions xmlns:bpmn="http://www.omg.org/spec/BPMN/20100524/MODEL" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:di="http://www.omg.org/spec/DD/20100524/DI" xmlns:dc="http://www.omg.org/spec/DD/20100524/DC" xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI" xmlns:camunda="http://camunda.org/schema/1.0/bpmn" xmlns:bioc="http://bpmn.io/schema/bpmn/biocolor/1.0" xmlns:ssbp="www.sparxsystems.com.au/bpmn20" id="EAPK_3E484AFC_313D_4632_9561_279D2FAF6BE3" name="Package1" targetNamespace="www.sparxsystems.com.au/bpmn20" exporter="Camunda Modeler" exporterVersion="4.0.0">
  <bpmn:collaboration id="EAID_DC000000_313D_4632_9561_279D2FAF6BE3">
    <bpmn:participant id="GETREINSURANCE" name="اخذ پوشش اتکایی اختیاری" processRef="BP-05-01" />
  </bpmn:collaboration>
  <bpmn:process id="BP-05-01" name="اخذ پوشش اتکایی اختیاری" isExecutable="true" camunda:candidateStarterGroups="TechnicalManager" camunda:candidateStarterUsers="m_sadei">
    <bpmn:laneSet id="EAID_LS000000_0AB5_44b4_B0B4_39E5F07F629C">
      <bpmn:lane id="Lane_10232yv" name="کارشناس فنی">
        <bpmn:flowNodeRef>AttachPolicyAndDocumentByExpert</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="Lane_00z8hd1" name="رییس اداره فنی">
        <bpmn:flowNodeRef>AttachPolicyAndDocumentByBoss</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0v24i5p</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="EAID_B2E9DA68_F378_4d36_A799_DC1C58052534" name="رییس اداره واگذاری اتکایی">
        <bpmn:flowNodeRef>responseEmailByBoss</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0ix7c4o</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ReviewDocumentByBoss</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_01ncjze</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>DocumentReviewByReinsuranceSupervisor</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>LetterOfferReviewByReinsuranceSupervisor</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0vxad17</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>EAID_E0EF1BBD_BDFF_49c8_A525_3AD664140434</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="EAID_C266A02B_C2F8_4fa8_8918_DF2D3EC441D8" name="کارشناس واگذاری اتکایی اختیاری">
        <bpmn:flowNodeRef>responseEmailByExpert</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>ProvidingOfferLetter</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_0rwp0dl</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="EAID_5F7693DE_3A53_4a4b_8711_01C82E746AA7" name="مدیر بیمه‌های اتکایی و امور بین الملل">
        <bpmn:flowNodeRef>ReviewDocumentByManager</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_1821pf8</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_10wj7xf</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1uys5pb</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>recieveInformation</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Event_1xzndew</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Activity_184ac36</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>SendEmail</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>Gateway_182t1rp_accept</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>DocumentReviewByReinsuranceManager</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="EAID_9527B4FF_5ECD_410d_9ADB_6028940B1C73" name="مدیر فنی">
        <bpmn:flowNodeRef>Start</bpmn:flowNodeRef>
        <bpmn:flowNodeRef>DocumentReviewBytechnicalManager</bpmn:flowNodeRef>
      </bpmn:lane>
      <bpmn:lane id="EAID_138C74AF_D110_43cb_B9D9_BC7D36A20D4E" name="مسئول دبیرخانه">
        <bpmn:flowNodeRef>Activity_1pkc9x1</bpmn:flowNodeRef>
      </bpmn:lane>
    </bpmn:laneSet>
    <bpmn:sequenceFlow id="Flow_0fpzb7p" sourceRef="Gateway_10wj7xf" targetRef="Event_1xzndew">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${addMoreCompany=='reject' }</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_03oxek0" sourceRef="Activity_184ac36" targetRef="Event_1uys5pb" />
    <bpmn:sequenceFlow id="Flow_1j8v7c9" sourceRef="Gateway_10wj7xf" targetRef="DocumentReviewByReinsuranceSupervisor">
      <bpmn:extensionElements>
        <camunda:executionListener event="take">
          <camunda:script scriptFormat="groovy">execution.setVariable('sendTable',sendTable2)</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${( addMoreCompany=='accept' &amp;&amp; taskState=='reject')|| (taskState=='accept' &amp;&amp; sendTable2.isEmpty() &amp;&amp; remainRate!=0) }</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1izjnle" sourceRef="responseEmailByExpert" targetRef="recieveInformation" />
    <bpmn:sequenceFlow id="Flow_1r102qx" sourceRef="ReviewDocumentByManager" targetRef="Activity_184ac36" />
    <bpmn:sequenceFlow id="Flow_1vjlazp" sourceRef="AttachPolicyAndDocumentByExpert" targetRef="ReviewDocumentByBoss" />
    <bpmn:sequenceFlow id="Flow_1y7ic82" sourceRef="Gateway_10wj7xf" targetRef="AttachPolicyAndDocumentByBoss">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionFilePolicy=='No' &amp;&amp; remainRate==0 &amp;&amp; taskState=='accept'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0fiu15b" sourceRef="Gateway_10wj7xf" targetRef="Activity_1pkc9x1">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${ taskState=='accept' &amp;&amp; !sendTable2.isEmpty() &amp;&amp; remainRate!=0 }</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0trx5px" sourceRef="Gateway_10wj7xf" targetRef="Activity_184ac36">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionFilePolicy=='Yes' &amp;&amp; taskState=='accept' &amp;&amp; !keyList.isEmpty()}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_04ptn0l" sourceRef="recieveInformation" targetRef="Activity_1821pf8" />
    <bpmn:sequenceFlow id="Flow_12oqz9f" sourceRef="SendEmail" targetRef="Gateway_182t1rp_accept" />
    <bpmn:sequenceFlow id="Flow_0olpwx2" sourceRef="Start" targetRef="DocumentReviewBytechnicalManager" />
    <bpmn:sequenceFlow id="Flow_1mcl42f" name="خیر" sourceRef="Gateway_01ncjze" targetRef="DocumentReviewBytechnicalManager">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!accept1}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0skaxl0" name="بله" sourceRef="Gateway_01ncjze" targetRef="DocumentReviewByReinsuranceSupervisor">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${accept1}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0kacgrx" name="خیر" sourceRef="Gateway_0rwp0dl" targetRef="DocumentReviewByReinsuranceManager">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!accept2}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1od7f25" name="بله" sourceRef="Gateway_0rwp0dl" targetRef="ProvidingOfferLetter">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${accept2}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="EAID_7A2D0660_D981_4891_AC79_D721A1469C50" sourceRef="DocumentReviewBytechnicalManager" targetRef="DocumentReviewByReinsuranceManager" />
    <bpmn:sequenceFlow id="EAID_0BC97EF0_3B9B_471f_91E4_DA33E1BC8D78" name="بله" sourceRef="EAID_E0EF1BBD_BDFF_49c8_A525_3AD664140434" targetRef="SendEmail">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${accept4}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="EAID_A7E604F2_52A1_4663_B0BC_9F6F1464C148" name="خیر" sourceRef="EAID_E0EF1BBD_BDFF_49c8_A525_3AD664140434" targetRef="ProvidingOfferLetter">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${!accept4}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="EAID_362AA0BD_1AA2_4656_AF7E_6BA5FFA91F64" sourceRef="DocumentReviewByReinsuranceManager" targetRef="Gateway_01ncjze" />
    <bpmn:sequenceFlow id="EAID_F4A0E083_4094_49a7_87B9_25CAF69A4ECD" sourceRef="LetterOfferReviewByReinsuranceSupervisor" targetRef="EAID_E0EF1BBD_BDFF_49c8_A525_3AD664140434" />
    <bpmn:sequenceFlow id="EAID_8E161C7B_3773_4b2c_BBAC_9EC1DD6C2BE6" sourceRef="ProvidingOfferLetter" targetRef="LetterOfferReviewByReinsuranceSupervisor" />
    <bpmn:sequenceFlow id="EAID_330B66D0_C6BE_451f_8CD2_D8170F684971" sourceRef="DocumentReviewByReinsuranceSupervisor" targetRef="Gateway_0vxad17" />
    <bpmn:sequenceFlow id="Flow_0vzg11b" name="خیر" sourceRef="Gateway_0vxad17" targetRef="Gateway_0rwp0dl">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionAssingnee=='byExpert'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1tjjo89" name="بله" sourceRef="Gateway_0vxad17" targetRef="SendEmail">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionAssingnee=='byBoss'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1nbmceq" sourceRef="Gateway_182t1rp_accept" targetRef="DocumentReviewByReinsuranceSupervisor">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${acceptLetter=='No'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1fjm6ol" sourceRef="Activity_1pkc9x1" targetRef="responseEmailByBoss" />
    <bpmn:sequenceFlow id="Flow_15n7dk2" sourceRef="Gateway_182t1rp_accept" targetRef="Activity_1pkc9x1">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${acceptLetter=='Yes'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1giohc7" sourceRef="Activity_1821pf8" targetRef="Gateway_10wj7xf" />
    <bpmn:sequenceFlow id="Flow_11zz0yd" sourceRef="Gateway_0v24i5p" targetRef="AttachPolicyAndDocumentByExpert">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionAssingnee2=='byExpert'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0r41wtu" sourceRef="ReviewDocumentByBoss" targetRef="ReviewDocumentByManager" />
    <bpmn:sequenceFlow id="Flow_1gifxbr" sourceRef="AttachPolicyAndDocumentByBoss" targetRef="Gateway_0v24i5p" />
    <bpmn:sequenceFlow id="Flow_0c0wu28" sourceRef="Gateway_0v24i5p" targetRef="ReviewDocumentByBoss">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionAssingnee2=='byBoss'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_1tc70s3" sourceRef="responseEmailByBoss" targetRef="Gateway_0ix7c4o" />
    <bpmn:sequenceFlow id="Flow_1oeoo4b" sourceRef="Gateway_0ix7c4o" targetRef="responseEmailByExpert">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionAssingnee3=='byExpert'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:sequenceFlow id="Flow_0aqp00w" sourceRef="Gateway_0ix7c4o" targetRef="recieveInformation">
      <bpmn:conditionExpression xsi:type="bpmn:tFormalExpression">${questionAssingnee3=='byBoss'}</bpmn:conditionExpression>
    </bpmn:sequenceFlow>
    <bpmn:userTask id="DocumentReviewByReinsuranceManager" name="ارجاع اصل بیمه‌نامه، گزارش بازدید و سایر مستندات" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="Reinsuranc&#38;InternationalAffairsManager">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="transferRiskPercent" label="درصد واگذاری اختیاری" type="percent" />
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0kacgrx</bpmn:incoming>
      <bpmn:incoming>EAID_7A2D0660_D981_4891_AC79_D721A1469C50</bpmn:incoming>
      <bpmn:outgoing>EAID_362AA0BD_1AA2_4656_AF7E_6BA5FFA91F64</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_182t1rp_accept">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="manual" value="true" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_12oqz9f</bpmn:incoming>
      <bpmn:outgoing>Flow_1nbmceq</bpmn:outgoing>
      <bpmn:outgoing>Flow_15n7dk2</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="SendEmail" name="ارجاع نامه" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="Reinsuranc&#38;InternationalAffairsManager">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="acceptLetter" label="آیا نامه مورد تایید است؟" type="enum">
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="defects1" label="موارد مورد نقص" type="text">
            <camunda:properties>
              <camunda:property id="show" value="data.acceptLetter==&#39;No&#39;" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>EAID_0BC97EF0_3B9B_471f_91E4_DA33E1BC8D78</bpmn:incoming>
      <bpmn:incoming>Flow_1tjjo89</bpmn:incoming>
      <bpmn:outgoing>Flow_12oqz9f</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="EAID_E0EF1BBD_BDFF_49c8_A525_3AD664140434" name="آیا مورد تایید است؟">
      <bpmn:incoming>EAID_F4A0E083_4094_49a7_87B9_25CAF69A4ECD</bpmn:incoming>
      <bpmn:outgoing>EAID_A7E604F2_52A1_4663_B0BC_9F6F1464C148</bpmn:outgoing>
      <bpmn:outgoing>EAID_0BC97EF0_3B9B_471f_91E4_DA33E1BC8D78</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0rwp0dl" name="آیا مورد تایید است؟">
      <bpmn:incoming>Flow_0vzg11b</bpmn:incoming>
      <bpmn:outgoing>Flow_1od7f25</bpmn:outgoing>
      <bpmn:outgoing>Flow_0kacgrx</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:exclusiveGateway id="Gateway_0vxad17" name="تهیه نامه توسط رییس اداره انجام می شود؟">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="manual" value="true" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>EAID_330B66D0_C6BE_451f_8CD2_D8170F684971</bpmn:incoming>
      <bpmn:outgoing>Flow_0vzg11b</bpmn:outgoing>
      <bpmn:outgoing>Flow_1tjjo89</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="ProvidingOfferLetter" name="تهیه نامه پیشنهادی واگذاری" camunda:formKey="app:task-form" camunda:assignee="${users.id}" camunda:candidateGroups="OptionalAssignableReinsuranceExpert">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="divider_email" label="اطلاعات نامه پیشنهادی" type="divider" />
          <camunda:formField id="sendTable1" label="جدول ارسال ایمیل" type="dataTable">
            <camunda:properties>
              <camunda:property id="layout" value="flex" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable1.companyName" label="نام شرکت بیمه گر پیشنهادی" type="select" />
          <camunda:formField id="sendTable1.namePerson" label="نام مخاطب" type="string">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
              <camunda:property id="calculateValue" value="value=row.companyName.name" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable1.position" label="موقعیت شغلی " type="string">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
              <camunda:property id="calculateValue" value="value=row.companyName.position" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable1.suggestRate" label="نرخ اتکایی پیشنهادی" type="percent" />
          <camunda:formField id="sendTable1.subjectLetter" label="عنوان نامه " type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable1.textLetter" label="متن نامه" type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable1.sendEmail" label="ارسال ایمیل" type="boolean" />
          <camunda:formField id="sendTable1.emailAddress" label="آدرس ایمیل" type="select">
            <camunda:properties>
              <camunda:property id="custom" value="var token = null; var url = window.location.origin + &#39;/&#39; + window.location.pathname.split(&#39;/&#39;)[1] + &#39;/data/companyEmail.json&#39;; var xhttp = new XMLHttpRequest(); xhttp.onreadystatechange = function () {     if (this.readyState == 4 &#38;&#38; this.status == 200) {         var items = JSON.parse(xhttp.responseText);         var ret = [];         if (row.companyName !== null) {             for (i = 0; i &#60; items.length; i++) {                 if (items[i].id == row.companyName.id) {                     ret.push(items[i]);                 }             }             values = ret;         }     } }; xhttp.open(&#39;GET&#39;, url, false); if (token) {     xhttp.setRequestHeader(&#39;Authorization&#39;, token); } else {     xhttp.withCredentials = true; } xhttp.send();" />
              <camunda:property id="refreshOn" value="row.companyName" />
              <camunda:property id="multiple" value="true" />
              <camunda:property id="show" value="row.sendEmail==true" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="complete">
          <camunda:script scriptFormat="groovy">task.execution.setVariable('sendTable2',sendTable1)
///email
task.execution.setVariable('sendTableEmail',sendTable2.findAll{it.sendEmail==true})</camunda:script>
        </camunda:taskListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>EAID_A7E604F2_52A1_4663_B0BC_9F6F1464C148</bpmn:incoming>
      <bpmn:incoming>Flow_1od7f25</bpmn:incoming>
      <bpmn:outgoing>EAID_8E161C7B_3773_4b2c_BBAC_9EC1DD6C2BE6</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="LetterOfferReviewByReinsuranceSupervisor" name="بررسی نامه پیشنهادی واگذاری" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="HeadOfAcceptableReinsurance">
      <bpmn:extensionElements>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>EAID_8E161C7B_3773_4b2c_BBAC_9EC1DD6C2BE6</bpmn:incoming>
      <bpmn:outgoing>EAID_F4A0E083_4094_49a7_87B9_25CAF69A4ECD</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="DocumentReviewByReinsuranceSupervisor" name="ارجاع پیش‌نویس/اصل بیمه‌نامه و سایر مستندات" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="HeadOfAcceptableReinsurance">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="transferRiskPercent1" label="درصد واگذاری اختیاری" type="percent">
            <camunda:properties>
              <camunda:property id="calculateValue" value="value=data.transferRiskPercent" />
              <camunda:property id="allowCalculateOverride" value="true" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="remainRate" label="نرخ باقی مانده اتکایی" type="percent">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
              <camunda:property id="show" value="data.DocumentReviewByReinsuranceSupervisor_counter&#62;0" />
              <camunda:property id="excludeFromHistory" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="questionAssingnee" label="آیا اطلاعات شرکت‌های اتکایی را ثبت می‌کنید؟" type="enum">
            <camunda:value id="byBoss" name="ثبت در خواست" />
            <camunda:value id="byExpert" name="توسط کارشناس" />
          </camunda:formField>
          <camunda:formField id="users" label="انتخاب کاربر" type="select">
            <camunda:properties>
              <camunda:property id="show" value="data.questionAssingnee==&#39;byExpert&#39;" />
              <camunda:property id="url" value="{{window.location.origin}}/{{window.location.pathname.split(&#39;/&#39;)[1]}}/rest/user/parentgroup?groupId=HeadOfAcceptableReinsurance" />
              <camunda:property id="itemLabel" value="label" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable" label="جدول ارسال ایمیل" type="dataTable">
            <camunda:properties>
              <camunda:property id="layout" value="flex" />
              <camunda:property id="show" value="data.questionAssingnee==&#39;byBoss&#39;" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable.companyName" label="نام شرکت بیمه گر پیشنهادی" type="select" />
          <camunda:formField id="sendTable.namePerson" label="نام مخاطب" type="string">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
              <camunda:property id="calculateValue" value="value=row.companyName.name" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable.position" label="موقعیت شغلی " type="string">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
              <camunda:property id="calculateValue" value="value=row.companyName.position" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable.suggestRate" label="نرخ اتکایی پیشنهادی" type="percent" />
          <camunda:formField id="sendTable.subjectLetter" label="عنوان نامه " type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable.textLetter" label="متن نامه" type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable.sendEmail" label="ارسال ایمیل" type="boolean" />
          <camunda:formField id="sendTable.emailAddress" label="آدرس ایمیل" type="select">
            <camunda:properties>
              <camunda:property id="custom" value="var token = null; var url = window.location.origin + &#39;/&#39; + window.location.pathname.split(&#39;/&#39;)[1] + &#39;/data/companyEmail.json&#39;; var xhttp = new XMLHttpRequest(); xhttp.onreadystatechange = function () {     if (this.readyState == 4 &#38;&#38; this.status == 200) {         var items = JSON.parse(xhttp.responseText);         var ret = [];         if (row.companyName !== null) {             for (i = 0; i &#60; items.length; i++) {                 if (items[i].id == row.companyName.id) {                     ret.push(items[i]);                 }             }             values = ret;         }     } }; xhttp.open(&#39;GET&#39;, url, false); if (token) {     xhttp.setRequestHeader(&#39;Authorization&#39;, token); } else {     xhttp.withCredentials = true; } xhttp.send();" />
              <camunda:property id="refreshOn" value="row.companyName" />
              <camunda:property id="multiple" value="true" />
              <camunda:property id="show" value="row.sendEmail==true" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">execution.setVariable('sendTable1',sendTable)
execution.setVariable('sendTable2',sendTable)

if(DocumentReviewByReinsuranceSupervisor_counter==1)
execution.setVariable('transferRiskPercent2',transferRiskPercent1)

///email
execution.setVariable('sendTableEmail',sendTable2.findAll{it.sendEmail==true})</camunda:script>
        </camunda:executionListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0skaxl0</bpmn:incoming>
      <bpmn:incoming>Flow_1nbmceq</bpmn:incoming>
      <bpmn:incoming>Flow_1j8v7c9</bpmn:incoming>
      <bpmn:outgoing>EAID_330B66D0_C6BE_451f_8CD2_D8170F684971</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_01ncjze" name="آیا مدارک کامل است؟">
      <bpmn:incoming>EAID_362AA0BD_1AA2_4656_AF7E_6BA5FFA91F64</bpmn:incoming>
      <bpmn:outgoing>Flow_0skaxl0</bpmn:outgoing>
      <bpmn:outgoing>Flow_1mcl42f</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="DocumentReviewBytechnicalManager" name="ثبت اطلاعات تکمیلی و الصاق گزارش بازدید و سایر مستندات" camunda:formKey="app:task-form" camunda:assignee="${starter}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="divider_risk" label="مشخصات ریسک" type="divider">
            <camunda:properties>
              <camunda:property id="columns" value="1" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="typePolicy" label="نوع بیمه نامه" type="select">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="retainAsset" label="سرمایه نگهداری " type="long">
            <camunda:properties>
              <camunda:property id="suffix" value="ریال" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="riskAuthorizations" label="ریسک در حدود اختیارات" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="technicalManager" name="مدیر فنی" />
            <camunda:value id="technicalAssistant" name="معاون فنی و توسعه بازار" />
          </camunda:formField>
          <camunda:formField id="existReport" label="گزارش بازدید اولیه وجود دارد؟" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="fileReport" label="الصاق فایل گزارش بازدید" type="file">
            <camunda:properties>
              <camunda:property id="span" value="5" />
              <camunda:property id="show" value="data.existReport==&#39;Yes&#39;" />
              <camunda:property id="cssClass" value="az-width-300" />
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="emergencyReinsurance" label="آیا مورد ریسک نیاز به اتکایی فوری دارد؟" type="enum">
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="dateOfDeadline" label="آخرین مهلت زمانی" type="date">
            <camunda:properties>
              <camunda:property id="show" value="data.emergencyReinsurance==&#39;Yes&#39;" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="assetRisk" label="مبلغ کل سرمایه" type="long">
            <camunda:properties>
              <camunda:property id="suffix" value="ریال" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="questionSeprateAssetRisk" label="مورد بیمه قابل تفکیک می باشد؟" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="seprateAssetRiskTable" label="سرمایه هر ریسک به تفکیک " type="dataTable">
            <camunda:properties>
              <camunda:property id="show" value="data.questionSeprateAssetRisk==&#39;Yes&#39;" />
              <camunda:property id="span" value="8" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="seprateAssetRiskTable.issue" label="ریسک" type="string" />
          <camunda:formField id="seprateAssetRiskTable.cash" label="مبلغ" type="long">
            <camunda:properties>
              <camunda:property id="suffix" value="ریال" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="highAssetRishTable" label="بالاترین سرمایه موجود در بیمه نامه" type="grid">
            <camunda:properties>
              <camunda:property id="show" value="data.questionSeprateAssetRisk==&#39;Yes&#39;" />
              <camunda:property id="disableAddingRemovingRows" value="true" />
              <camunda:property id="span" value="8" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="highAssetRiskTable.issue" label="ریسک" type="string">
            <camunda:properties>
              <camunda:property id="calculateValue" value="var n; n=_.maxBy(data.seprateAssetRiskTable,&#39;cash&#39;); value=n.issue" />
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="highAssetRiskTable.cash" label="مبلغ" type="long">
            <camunda:properties>
              <camunda:property id="calculateValue" value="var n; n=_.maxBy(data.seprateAssetRiskTable,&#39;cash&#39;) ; value=n.cash" />
              <camunda:property id="readonly" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="questionHistory" label="آیا در سه سال گذشته مورد بیمه سابقه خسارت داشته است؟" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="reportTable" label="گزارشات خسارت" type="grid">
            <camunda:properties>
              <camunda:property id="show" value="data.questionHistory==&#39;Yes&#39;" />
              <camunda:property id="columns" value="3" />
              <camunda:property id="span" value="8" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="reportTable.date" label="تاریخ" type="date" />
          <camunda:formField id="reportTable.loss" label="مبلغ خسارت" type="long">
            <camunda:properties>
              <camunda:property id="suffix" value="ریال" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="reportTable.explain" label="شرح مختصر" type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="questionRenewal" label="آیا بیمه‌نامه تمدیدی می باشد؟" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="numberPreviousPolicy" label="شماره نامه قبلی" type="string">
            <camunda:properties>
              <camunda:property id="show" value="data.questionRenewal==&#39;Yes&#39;" />
              <camunda:property id="span" value="5" />
              <camunda:property id="cssClass" value="az-width-300" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="questionProjectImproving" label="بیمه‌نامه مهندسی نیاز به اطلاعات درصد پیشرفت پروژه دارد؟" type="enum">
            <camunda:properties>
              <camunda:property id="show" value="data.typePolicy.value==&#39;EngineeringInsurance&#39;" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="improvingTable" label="اطلاعات درصد پیشرفت پروژه" type="grid">
            <camunda:properties>
              <camunda:property id="show" value="data.typePolicy.value==&#39;EngineeringInsurance&#39; &#38;&#38; data.questionProjectImproving==&#39;Yes&#39;" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="improvingTable.ratio" label="درصد پیشرفت" type="percent">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="improvingTable.file" label="جدول زمانی پروژه" type="file">
            <camunda:properties>
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
              <camunda:property id="span" value="5" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="questuionValuePerCargo" label="آیا ارزش هر حمل موجود است؟" type="enum">
            <camunda:properties>
              <camunda:property id="show" value="data.typePolicy.value==&#39;CargoInsurance&#39; || data.typePolicy.value==&#39;LiabilityCariers&#39;" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="valueCargoTable" label="جدول ارزش هر حمل" type="grid">
            <camunda:properties>
              <camunda:property id="show" value="(data.typePolicy.value==&#39;CargoInsurance&#39; || data.typePolicy.value==&#39;LiabilityCariers&#39; ) &#38;&#38;  data.questuionValuePerCargo==&#39;Yes&#39; " />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="valueCargoTable.Number" label="تعداد حمل" type="long" />
          <camunda:formField id="valueCargoTable.detailsPerValue" label="جزئیات ارزش هر حمل" type="long" />
          <camunda:formField id="totalNumberCargo" label="تعداد کل حمل " type="long">
            <camunda:properties>
              <camunda:property id="show" value="(data.typePolicy.value==&#39;CargoInsurance&#39; || data.typePolicy.value==&#39;LiabilityCariers&#39; ) &#38;&#38;  data.questuionValuePerCargo==&#39;Yes&#39;" />
              <camunda:property id="calculateValue" value=" _.sumBy(data.valueCargoTable, &#39;Number&#39;)" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="certificateAircraftShip" label="گواهی‌های لازم جهت صدور بیمه‌نامه" type="file">
            <camunda:properties>
              <camunda:property id="span" value="4" />
              <camunda:property id="show" value="data.typePolicy.value==&#39;AircraftInsurance&#39; || data.typePolicy.value==&#39;Liability&#39; " />
              <camunda:property id="cssClass" value="az-width-300" />
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="questionCenteralInsuranceArticle6" label="آیا مورد ریسک مشمول ماده 6 آیین نامه 76 است؟" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="fileCenteralInsuranceArticle" label="بارگزاری فایل مجوز" type="file">
            <camunda:properties>
              <camunda:property id="show" value="data.questionCenteralInsuranceArticle6==&#39;Yes&#39;" />
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
              <camunda:property id="cssClass" value="az-width-300" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">task.execution.setVariable('acceptList',new ArrayList())
task.execution.setVariable('keyList',new ArrayList())</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0olpwx2</bpmn:incoming>
      <bpmn:incoming>Flow_1mcl42f</bpmn:incoming>
      <bpmn:outgoing>EAID_7A2D0660_D981_4891_AC79_D721A1469C50</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:startEvent id="Start" name="ثبت اطلاعات و الصاق بیمه‌نامه" camunda:formKey="app:start-form" camunda:initiator="starter">
      <bpmn:extensionElements>
        <camunda:formData businessKey="numberPolicyholder">
          <camunda:formField id="divider_personal" label="مشخصات بیمه نامه" type="divider">
            <camunda:properties>
              <camunda:property id="columns" value="2" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="namePolicyholder" label="نام بیمه گذار" type="string">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="questionFilePolicy" label="بیمه‌نامه صادر شده است؟" type="enum">
            <camunda:value id="Yes" name="بله" />
            <camunda:value id="No" name="خیر" />
          </camunda:formField>
          <camunda:formField id="numberPolicyholder" label=" شماره بیمه نامه" type="string">
            <camunda:properties>
              <camunda:property id="show" value="questionFilePolicy==&#39;Yes&#39;" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="filePolicy" label="فایل بیمه‌نامه" type="file">
            <camunda:properties>
              <camunda:property id="span" value="4" />
              <camunda:property id="show" value="data.questionFilePolicy==&#39;Yes&#39;" />
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
        </camunda:formData>
        <camunda:properties>
          <camunda:property name="submitLabel" value="ادامه" />
          <camunda:property name="columns" value="2" />
        </camunda:properties>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">if(questionFilePolicy=='Yes' )
{
execution.setBusinessKey(numberPolicyholder);}
else
execution.setBusinessKey(''+new Date().getTime()-1577824200000);
execution.setVariable('requestUser',currentUser)</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:outgoing>Flow_0olpwx2</bpmn:outgoing>
    </bpmn:startEvent>
    <bpmn:callActivity id="Activity_184ac36" name="ارتباط با شرکت های اتکایی" calledElement="BP-05-01-01">
      <bpmn:extensionElements>
        <camunda:in businessKey="#{execution.processBusinessKey}" />
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">def row=new ArrayList()
row.add(company)
execution.setVariable('acceptCompany',row)

execution.setVariable('historytableRow',historytable.findAll{it.companyName==company.companyName.label})</camunda:script>
        </camunda:executionListener>
        <camunda:in source="acceptCompany" target="acceptCompany" />
        <camunda:in source="company" target="company" />
        <camunda:in source="namePolicyholder" target="namePolicyholder" />
        <camunda:in source="numberPolicyholder" target="numberPolicyholder" />
        <camunda:in source="fileReport" target="fileReport" />
        <camunda:in source="retainAsset" target="retainAsset" />
        <camunda:in source="assetRisk" target="assetRisk" />
        <camunda:in source="transferRiskPercent" target="transferRiskPercent" />
        <camunda:in source="questionFilePolicy" target="questionFilePolicy" />
        <camunda:in source="historytableRow" target="historytable" />
        <camunda:in source="typePolicy" target="typePolicy" />
        <camunda:in source="filePolicy" target="filePolicy" />
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0trx5px</bpmn:incoming>
      <bpmn:incoming>Flow_1r102qx</bpmn:incoming>
      <bpmn:outgoing>Flow_03oxek0</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics camunda:collection="${keyList}" camunda:elementVariable="company" />
    </bpmn:callActivity>
    <bpmn:endEvent id="Event_1xzndew">
      <bpmn:incoming>Flow_0fpzb7p</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:userTask id="recieveInformation" name="دریافت نرخ از شرکت‌های اتکایی" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="Reinsuranc&#38;InternationalAffairsManager">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="sendTable2" label="جدول ارسال ایمیل" type="dataTable">
            <camunda:properties>
              <camunda:property id="excludeFromHistory" value="true" />
              <camunda:property id="layout" value="flex" />
              <camunda:property id="disableAddingRemovingRows" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.companyName" label="نام شرکت بیمه گر پیشنهادی" type="select">
            <camunda:properties>
              <camunda:property id="url" value="http://localhost:9090/bpms/data/companyName.json" />
              <camunda:property id="disabled" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.pastOffer" label="نرخ پیشنهادی قبلی" type="percent">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.acceptRate" label="نرخ تایید شده " type="percent">
            <camunda:properties>
              <camunda:property id="calculateValue" value="value=(row.questionForNegotiation.value==&#39;accept&#39;)?row.offerRateToReinsuranceCompany:0" />
              <camunda:property id="hidden" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.offerRateToReinsuranceCompany" label="نرخ پیشنهادی بیمه‌گر اتکایی" type="percent">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.questionForNegotiation" label="نرخ پیشنهادی نیازمند کدام یک از اقدامات زیراست؟" type="select">
            <camunda:properties>
              <camunda:property id="span" value="4" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable2.sendEmail" label="ارسال ایمیل" type="boolean">
            <camunda:properties>
              <camunda:property id="show" value=" row.questionForNegotiation.value==&#39;needClaim&#39;" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.emailAddress" label="آدرس ایمیل" type="select">
            <camunda:properties>
              <camunda:property id="multiple" value="true" />
              <camunda:property id="show" value="row.sendEmail==true &#38;&#38; row.questionForNegotiation.value==&#39;needClaim&#39;" />
              <camunda:property id="custom" value="var token = null; var url = window.location.origin + &#39;/&#39; + window.location.pathname.split(&#39;/&#39;)[1] + &#39;/data/companyEmail.json&#39;; var xhttp = new XMLHttpRequest(); xhttp.onreadystatechange = function () {     if (this.readyState == 4 &#38;&#38; this.status == 200) {         var items = JSON.parse(xhttp.responseText);         var ret = [];         if (row.companyName !== null) {             for (i = 0; i &#60; items.length; i++) {                 if (items[i].id == row.companyName.id) {                     ret.push(items[i]);                 }             }             values = ret;         }     } }; xhttp.open(&#39;GET&#39;, url, false); if (token) {     xhttp.setRequestHeader(&#39;Authorization&#39;, token); } else {     xhttp.withCredentials = true; } xhttp.send();" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.empty" type="placeholder" />
          <camunda:formField id="sendTable2.subjectLetter" label="عنوان نامه " type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
              <camunda:property id="show" value="row.questionForNegotiation.value !=&#39;accept&#39;&#38;&#38;row.questionForNegotiation.value !=&#39;reject&#39;" />
              <camunda:property id="rows" value="2" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.textLetter" label="متن نامه" type="text">
            <camunda:properties>
              <camunda:property id="autoExpand" value="true" />
              <camunda:property id="show" value="row.questionForNegotiation.value !=&#39;accept&#39;&#38;&#38;row.questionForNegotiation.value !=&#39;reject&#39;" />
              <camunda:property id="rows" value="3" />
              <camunda:property id="width" value="7" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.suggestRate" label="نرخ اتکایی پیشنهادی" type="percent">
            <camunda:properties>
              <camunda:property id="show" value="row.questionForNegotiation.value !=&#39;accept&#39;&#38;&#38;row.questionForNegotiation.value !=&#39;reject&#39;" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="remainRate" label="نرخ باقی مانده اتکایی" type="percent">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
              <camunda:property id="calculateValue" value="value=data.transferRiskPercent2-_.sumBy(data.sendTable2,&#39;acceptRate&#39;)" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="taskState" label="وضعیت تکمیل فرم" type="enum">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
            <camunda:value id="accept" name="تایید" />
            <camunda:value id="reject" name="عدم تایید" />
          </camunda:formField>
          <camunda:formField id="addMoreCompany" label="نیاز به افزودن شرکت های بیشتر است؟" type="enum" defaultValue="accept">
            <camunda:properties>
              <camunda:property id="show" value="data.taskState==&#39;reject&#39;" />
            </camunda:properties>
            <camunda:value id="accept" name="نیاز به مکاتبه با شرکت های جدید" />
            <camunda:value id="reject" name="لغو فرآیند" />
          </camunda:formField>
          <camunda:formField id="historytable" label="تاریخچه نامه‌نگاری با شرکت اتکایی" type="dataTable">
            <camunda:properties>
              <camunda:property id="show" value="data.historytable.length&#62;0" />
              <camunda:property id="persistent" value="false" />
              <camunda:property id="excludeFromHistory" value="true" />
              <camunda:property id="disabled" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="historytable.companyName" label="نام شرکت" type="string">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="cssClass" value="az-flat" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="historytable.date" label="تاریخ بازگشت به شرکت بیمه‌گر اتکایی" type="date" defaultValue="historyList.dateSuggest">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="cssClass" value="az-flat" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="historytable.suggestRate" label="نرخ پیشنهادی شرکت بیمه دی (درصد)" type="long" defaultValue="historyList.suggestRate">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="cssClass" value="az-flat" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="historytable.offerRateToReinsuranceCompany" label="نرخ پیشنهادی شرکت بیمه‌گر اتکایی (درصد)" type="long" defaultValue="historyList.offerRateToReinsuranceCompany">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="cssClass" value="az-flat" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="historytable.questionForNegotiation" label="وضعیت درخواست " type="string">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="cssClass" value="az-flat" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="transferRiskPercent2" label="نرخ باقی مانده اتکایی کل" type="long">
            <camunda:properties>
              <camunda:property id="hidden" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">//ثبت جدول تاریخچه
if(historytable== null) historytable = new java.util.LinkedList()
for(def obj in sendTable2){
def row = new java.util.LinkedHashMap()
row.put('companyName',obj.companyName.label)
row.put('date',obj.date)
row.put('suggestRate',obj.pastOffer)
row.put('offerRateToReinsuranceCompany',obj.offerRateToReinsuranceCompany)
row.put('questionForNegotiation',obj.questionForNegotiation.label)
println row
historytable.add(row);}
execution.setVariable('historytable',historytable.findAll{it.offerRateToReinsuranceCompany!=null})
// ثبت مقدار باقیمانده اتکایی
execution.setVariable('transferRiskPercent2',remainRate)
//ایجاد لیست تایید شده ها و نیاز به مذاکره
execution.setVariable('keyList1',sendTable2.findAll{it.questionForNegotiation.value=='accept'})
keyList.addAll(keyList1)
execution.setVariable('sendTable2',sendTable2.findAll{it.questionForNegotiation.value=='needClaim'})
acceptList.addAll(keyList)
execution.setVariable('acceptList',acceptList)
///email
execution.setVariable('sendTableEmail',sendTable2.findAll{it.sendEmail==true})

///notification for manager

execution.setVariable('acceptCompany',keyList.collect{it.companyName.label}.join(", "))
execution.setVariable('acceptRate',keyList.collect{it.acceptRate}.join(", "))

execution.setVariable('companyPrefix',keyList.size&gt;1?'شرکت‌های':'شرکت‌')
execution.setVariable('ratePrefix',keyList.size&gt;1?'نرخ‌های':'نرخ')</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">for (Object p:sendTable2){
p.remove('suggestRate')
p.remove('questionForNegotiation')
p.remove('sendTable2.subjectLetter')
p.remove('sendTable2.textLetter')}</camunda:script>
        </camunda:executionListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1izjnle</bpmn:incoming>
      <bpmn:incoming>Flow_0aqp00w</bpmn:incoming>
      <bpmn:outgoing>Flow_04ptn0l</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:endEvent id="Event_1uys5pb">
      <bpmn:incoming>Flow_03oxek0</bpmn:incoming>
    </bpmn:endEvent>
    <bpmn:inclusiveGateway id="Gateway_10wj7xf" name="آیا کل نرخ اتکایی بصورت کامل واگذار شده است؟">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="manual" value="true" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1giohc7</bpmn:incoming>
      <bpmn:outgoing>Flow_0trx5px</bpmn:outgoing>
      <bpmn:outgoing>Flow_0fiu15b</bpmn:outgoing>
      <bpmn:outgoing>Flow_1y7ic82</bpmn:outgoing>
      <bpmn:outgoing>Flow_1j8v7c9</bpmn:outgoing>
      <bpmn:outgoing>Flow_0fpzb7p</bpmn:outgoing>
    </bpmn:inclusiveGateway>
    <bpmn:sendTask id="Activity_1821pf8" name="اطلاع رسانی پذیرش نرخ اتکایی" camunda:delegateExpression="${notificationService}">
      <bpmn:extensionElements>
        <camunda:inputOutput>
          <camunda:inputParameter name="message">با سلام و احترام 
${requestUser.label} مدیر محترم
${companyPrefix} ${acceptCompany} در مورد ریسک ارائه شده توسط بیمه گذار ${namePolicyholder} به ترتیب با ${ratePrefix} ${acceptRate} قبول کرده اند.</camunda:inputParameter>
          <camunda:inputParameter name="recipients">
            <camunda:list>
              <camunda:value>Start</camunda:value>
            </camunda:list>
          </camunda:inputParameter>
        </camunda:inputOutput>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_04ptn0l</bpmn:incoming>
      <bpmn:outgoing>Flow_1giohc7</bpmn:outgoing>
    </bpmn:sendTask>
    <bpmn:userTask id="ReviewDocumentByManager" name="ارجاع اصل بیمه‌نامه، گزارش بازدید و سایر مستندات" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="Reinsuranc&#38;InternationalAffairsManager">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="questionDocument3" label="مدارک تکمیل است" type="boolean" />
        </camunda:formData>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">execution.setVariable('keyList',sendTable2.findAll{it.questionForNegotiation.value=='accept'})</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0r41wtu</bpmn:incoming>
      <bpmn:outgoing>Flow_1r102qx</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="ReviewDocumentByBoss" name="ارجاع اصل بیمه‌نامه، گزارش بازدید و سایر مستندات" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="HeadOfAcceptableReinsurance">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="questionDocument2" label="مدارک تکمیل است" type="boolean" />
        </camunda:formData>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">execution.setVariable('keyList',sendTable2.findAll{it.questionForNegotiation.value=='accept'})</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1vjlazp</bpmn:incoming>
      <bpmn:incoming>Flow_0c0wu28</bpmn:incoming>
      <bpmn:outgoing>Flow_0r41wtu</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0v24i5p">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="manual" value="true" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1gifxbr</bpmn:incoming>
      <bpmn:outgoing>Flow_0c0wu28</bpmn:outgoing>
      <bpmn:outgoing>Flow_11zz0yd</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="AttachPolicyAndDocumentByExpert" name="الصاق گزارش بازدید و سایر مستندات و در یافت اصل بیمه نامه" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateUsers="${users2.id}">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="divider_infrormation" label="اطلاعات تکمیلی " type="divider">
            <camunda:properties>
              <camunda:property id="columns" value="2" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="numberPolicyholder2" label="شماره بیمه نامه" type="string">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="filePolicy2" label="بارگذاری بیمه نامه" type="file">
            <camunda:properties>
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="fileReport2" label="بارگذاری فایل گزارش" type="file">
            <camunda:properties>
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">def numberPolicyholder2=execution.getVariable('numberPolicyholder2')
execution.setVariable('numberPolicyholder',numberPolicyholder2)
def filePolicy2=execution.getVariable('filePolicy2')
execution.setVariable('filePolicy',filePolicy2)
def filerReport2=execution.getVariable('filerReport2')
execution.setVariable('filerReport',filerReport2)</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">execution.setVariable('sendTable2',acceptList)</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_11zz0yd</bpmn:incoming>
      <bpmn:outgoing>Flow_1vjlazp</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:exclusiveGateway id="Gateway_0ix7c4o">
      <bpmn:extensionElements>
        <camunda:properties>
          <camunda:property name="manual" value="true" />
        </camunda:properties>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1tc70s3</bpmn:incoming>
      <bpmn:outgoing>Flow_1oeoo4b</bpmn:outgoing>
      <bpmn:outgoing>Flow_0aqp00w</bpmn:outgoing>
    </bpmn:exclusiveGateway>
    <bpmn:userTask id="responseEmailByExpert" name=" پاسخ به ایمیل توسط کارشناس" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="users3">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="sendTable2" label="جدول ارسال ایمیل" type="dataTable">
            <camunda:properties>
              <camunda:property id="excludeFromHistory" value="true" />
              <camunda:property id="disableAddingRemovingRows" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.companyName.label" label="نام شرکت بیمه گر پیشنهادی" type="string">
            <camunda:properties>
              <camunda:property id="disabled" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.emailAddress" label="آدرس ایمیل" type="select">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="multiple" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.suggestRate" label="نرخ اتکایی پیشنهادی" type="percent">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.date" label="تاریخ" type="date">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable2.offerRateToReinsuranceCompany" label="نرخ پیشنهادی شرکت بیمه‌گر اتکایی" type="percent">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable2.pastOffer" label="نرخ پیشنهادی قبلی" type="percent">
            <camunda:properties>
              <camunda:property id="calculateValue" value="value=row.suggestRate" />
              <camunda:property id="hidden" value="true" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">for (Object p:sendTable2){
p.remove('offerRateToReinsuranceCompany')
p.remove('date')}</camunda:script>
        </camunda:executionListener>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1oeoo4b</bpmn:incoming>
      <bpmn:outgoing>Flow_1izjnle</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="responseEmailByBoss" name=" پاسخ به ایمیل توسط رییس اداره" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="HeadOfAcceptableReinsurance">
      <bpmn:extensionElements>
        <camunda:formData>
          <camunda:formField id="questionAssingnee3" label="آیا پاسخ شرکت‌های اتکایی را ثبت می‌کنید؟" type="enum">
            <camunda:value id="byBoss" name="ثبت در خواست" />
            <camunda:value id="byExpert" name="توسط کارشناس" />
          </camunda:formField>
          <camunda:formField id="users3" label="انتخاب کاربر" type="select">
            <camunda:properties>
              <camunda:property id="show" value="data.questionAssingnee3==&#39;byExpert&#39;" />
              <camunda:property id="url" value="{{window.location.origin}}/{{window.location.pathname.split(&#39;/&#39;)[1]}}/rest/user/parentgroup?groupId=HeadOfAcceptableReinsurance" />
              <camunda:property id="itemLabel" value="label" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable2" label="جدول ارسال ایمیل" type="dataTable">
            <camunda:properties>
              <camunda:property id="excludeFromHistory" value="true" />
              <camunda:property id="show" value="data.questionAssingnee3==&#39;byBoss&#39;" />
              <camunda:property id="disableAddingRemovingRows" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.companyName.label" label="نام شرکت بیمه گر پیشنهادی" type="string">
            <camunda:properties>
              <camunda:property id="disabled" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.emailAddress" label="آدرس ایمیل" type="select">
            <camunda:properties>
              <camunda:property id="disabled" />
              <camunda:property id="multiple" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.suggestRate" label="نرخ اتکایی پیشنهادی" type="percent">
            <camunda:properties>
              <camunda:property id="disabled" value="true" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="sendTable2.date" label="تاریخ" type="date">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable2.offerRateToReinsuranceCompany" label="نرخ پیشنهادی شرکت بیمه‌گر اتکایی" type="percent">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="sendTable2.pastOffer" label="نرخ پیشنهادی قبلی" type="percent">
            <camunda:properties>
              <camunda:property id="calculateValue" value="value=row.suggestRate" />
              <camunda:property id="hidden" value="true" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
        <camunda:taskListener event="create">
          <camunda:script scriptFormat="groovy">if(emergencyReinsurance=='Yes'){
task.setDescription('نیاز فوری به اخذ پوشش اتکایی'+'\nآخرین مهلت زمانی:'+ dateOfDeadline)};</camunda:script>
        </camunda:taskListener>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">for (Object p:sendTable2){
p.remove('offerRateToReinsuranceCompany')
p.remove('date')}</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1fjm6ol</bpmn:incoming>
      <bpmn:outgoing>Flow_1tc70s3</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:userTask id="AttachPolicyAndDocumentByBoss" name="ارجاع به کارشناس جهت الصاق بیمه‌نامه و مستندات" camunda:formKey="app:task-form" camunda:assignee="${starter}" camunda:candidateGroups="${typePolicy.groupboss}">
      <bpmn:extensionElements>
        <camunda:executionListener event="end">
          <camunda:script scriptFormat="groovy">def numberPolicyholder1=execution.getVariable('numberPolicyholder1')
execution.setVariable('numberPolicyholder',numberPolicyholder1)
def filePolicy1=execution.getVariable('filePolicy1')
execution.setVariable('filePolicy',filePolicy1)
def filerReport1=execution.getVariable('filerReport1')
execution.setVariable('filerReport',filerReport1)</camunda:script>
        </camunda:executionListener>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">execution.setVariable('sendTable2',acceptList)</camunda:script>
        </camunda:executionListener>
        <camunda:formData>
          <camunda:formField id="questionAssingnee2" label="آیا اطلاعات صدور را ثبت می‌کنید؟" type="enum">
            <camunda:value id="byBoss" name="ثبت در خواست" />
            <camunda:value id="byExpert" name="توسط کارشناس" />
          </camunda:formField>
          <camunda:formField id="users2" label="انتخاب کاربر" type="select">
            <camunda:properties>
              <camunda:property id="show" value="data.questionAssingnee2==&#39;byExpert&#39;" />
              <camunda:property id="url" value="{{window.location.origin}}/{{window.location.pathname.split(&#39;/&#39;)[1]}}/rest/user/parentgroup?groupId={{data.typePolicy.groupboss}}" />
              <camunda:property id="itemLabel" value="label" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="divider_infrormation" label="اطلاعات تکمیلی " type="divider">
            <camunda:properties>
              <camunda:property id="columns" value="2" />
              <camunda:property id="show" value="data.questionAssingnee2==&#39;byBoss&#39;" />
            </camunda:properties>
          </camunda:formField>
          <camunda:formField id="numberPolicyholder1" label="شماره بیمه نامه" type="string">
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="filePolicy1" label="بارگذاری بیمه نامه" type="file">
            <camunda:properties>
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
            <camunda:validation>
              <camunda:constraint name="required" config="true" />
            </camunda:validation>
          </camunda:formField>
          <camunda:formField id="fileReport1" label="بارگذاری فایل گزارش" type="file">
            <camunda:properties>
              <camunda:property id="filePattern" value=".xlsx,.docx,.jpg,.pdf,.png" />
            </camunda:properties>
          </camunda:formField>
        </camunda:formData>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_1y7ic82</bpmn:incoming>
      <bpmn:outgoing>Flow_1gifxbr</bpmn:outgoing>
    </bpmn:userTask>
    <bpmn:task id="Activity_1pkc9x1" name="ارسال ایمیل">
      <bpmn:extensionElements>
        <camunda:executionListener event="start">
          <camunda:script scriptFormat="groovy">execution.setVariable('addressEmail',informationEmail.emailAddress.collect{it.label}.join(", "))</camunda:script>
        </camunda:executionListener>
      </bpmn:extensionElements>
      <bpmn:incoming>Flow_0fiu15b</bpmn:incoming>
      <bpmn:incoming>Flow_15n7dk2</bpmn:incoming>
      <bpmn:outgoing>Flow_1fjm6ol</bpmn:outgoing>
      <bpmn:multiInstanceLoopCharacteristics camunda:collection="${sendTableEmail}" camunda:elementVariable="informationEmail" />
    </bpmn:task>
  </bpmn:process>
  <bpmndi:BPMNDiagram id="EAID_7C7ECEE9_29B6_46cd_B86E_E24F9429BACA" name="اخذ پوشش اتکایی اختیاری">
    <bpmndi:BPMNPlane id="EAID_PL000000_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_DC000000_313D_4632_9561_279D2FAF6BE3">
      <bpmndi:BPMNShape id="EAID_DO000000_29B6_46cd_B86E_E24F9429BACA" bpmnElement="GETREINSURANCE" isHorizontal="true">
        <dc:Bounds x="166" y="80" width="2506" height="1850" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000008_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_138C74AF_D110_43cb_B9D9_BC7D36A20D4E" isHorizontal="true">
        <dc:Bounds x="197" y="80" width="2474" height="637" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000010_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_9527B4FF_5ECD_410d_9ADB_6028940B1C73" isHorizontal="true">
        <dc:Bounds x="197" y="1418" width="2475" height="192" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000001_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_5F7693DE_3A53_4a4b_8711_01C82E746AA7" isHorizontal="true">
        <dc:Bounds x="197" y="716" width="2475" height="322" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000007_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_C266A02B_C2F8_4fa8_8918_DF2D3EC441D8" isHorizontal="true">
        <dc:Bounds x="197" y="1242" width="2475" height="176" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000006_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_B2E9DA68_F378_4d36_A799_DC1C58052534" isHorizontal="true">
        <dc:Bounds x="197" y="1038" width="2475" height="204" />
        <bpmndi:BPMNLabel />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_00z8hd1_di" bpmnElement="Lane_00z8hd1" isHorizontal="true">
        <dc:Bounds x="197" y="1610" width="2475" height="180" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Lane_10232yv_di" bpmnElement="Lane_10232yv" isHorizontal="true">
        <dc:Bounds x="197" y="1790" width="2475" height="140" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNEdge id="Flow_0aqp00w_di" bpmnElement="Flow_0aqp00w">
        <di:waypoint x="1705" y="1200" />
        <di:waypoint x="1800" y="1200" />
        <di:waypoint x="1800" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1oeoo4b_di" bpmnElement="Flow_1oeoo4b">
        <di:waypoint x="1680" y="1225" />
        <di:waypoint x="1680" y="1290" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tc70s3_di" bpmnElement="Flow_1tc70s3">
        <di:waypoint x="1680" y="1140" />
        <di:waypoint x="1680" y="1175" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0c0wu28_di" bpmnElement="Flow_0c0wu28">
        <di:waypoint x="2320" y="1665" />
        <di:waypoint x="2320" y="1141" />
        <di:waypoint x="2385" y="1141" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1gifxbr_di" bpmnElement="Flow_1gifxbr">
        <di:waypoint x="2250" y="1690" />
        <di:waypoint x="2295" y="1690" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0r41wtu_di" bpmnElement="Flow_0r41wtu">
        <di:waypoint x="2460" y="1097" />
        <di:waypoint x="2460" y="994" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_11zz0yd_di" bpmnElement="Flow_11zz0yd">
        <di:waypoint x="2320" y="1715" />
        <di:waypoint x="2320" y="1810" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1giohc7_di" bpmnElement="Flow_1giohc7">
        <di:waypoint x="2095" y="780" />
        <di:waypoint x="2165" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_15n7dk2_di" bpmnElement="Flow_15n7dk2">
        <di:waypoint x="1448" y="745" />
        <di:waypoint x="1448" y="420" />
        <di:waypoint x="1640" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1fjm6ol_di" bpmnElement="Flow_1fjm6ol">
        <di:waypoint x="1680" y="460" />
        <di:waypoint x="1680" y="1060" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1nbmceq_di" bpmnElement="Flow_1nbmceq">
        <di:waypoint x="1423" y="770" />
        <di:waypoint x="910" y="770" />
        <di:waypoint x="910" y="1095" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1tjjo89_di" bpmnElement="Flow_1tjjo89">
        <di:waypoint x="1103" y="1108" />
        <di:waypoint x="1103" y="870" />
        <di:waypoint x="1393" y="870" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1085" y="983" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0vzg11b_di" bpmnElement="Flow_0vzg11b">
        <di:waypoint x="1103" y="1158" />
        <di:waypoint x="1103" y="1288" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1111" y="1220" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000021_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_330B66D0_C6BE_451f_8CD2_D8170F684971">
        <di:waypoint x="1040" y="1133" />
        <di:waypoint x="1078" y="1133" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000047_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_8E161C7B_3773_4b2c_BBAC_9EC1DD6C2BE6">
        <di:waypoint x="1313" y="1277" />
        <di:waypoint x="1313" y="1166" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000046_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_F4A0E083_4094_49a7_87B9_25CAF69A4ECD">
        <di:waypoint x="1368" y="1141" />
        <di:waypoint x="1433" y="1141" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000008_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_362AA0BD_1AA2_4656_AF7E_6BA5FFA91F64">
        <di:waypoint x="628" y="891" />
        <di:waypoint x="673" y="891" />
        <di:waypoint x="673" y="1100" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000020_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_A7E604F2_52A1_4663_B0BC_9F6F1464C148">
        <di:waypoint x="1454" y="1162" />
        <di:waypoint x="1454" y="1311" />
        <di:waypoint x="1368" y="1311" />
        <bpmndi:BPMNLabel id="EAID_LBL000000_52A1_4663_B0BC_9F6F1464C148" labelStyle="EAID_LS000000_29B6_46cd_B86E_E24F9429BACA">
          <dc:Bounds x="1416" y="1293" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000045_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_0BC97EF0_3B9B_471f_91E4_DA33E1BC8D78">
        <di:waypoint x="1454" y="1120" />
        <di:waypoint x="1454" y="900" />
        <bpmndi:BPMNLabel id="EAID_LBL000000_3B9B_471f_91E4_DA33E1BC8D78" labelStyle="EAID_LS000000_29B6_46cd_B86E_E24F9429BACA">
          <dc:Bounds x="1438" y="1017" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="EAID_DL000034_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_7A2D0660_D981_4891_AC79_D721A1469C50">
        <di:waypoint x="440" y="1468" />
        <di:waypoint x="440" y="890" />
        <di:waypoint x="491" y="890" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1od7f25_di" bpmnElement="Flow_1od7f25">
        <di:waypoint x="1128" y="1313" />
        <di:waypoint x="1257" y="1313" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1150" y="1295" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0kacgrx_di" bpmnElement="Flow_0kacgrx">
        <di:waypoint x="1078" y="1313" />
        <di:waypoint x="550" y="1313" />
        <di:waypoint x="550" y="927" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="895" y="1295" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0skaxl0_di" bpmnElement="Flow_0skaxl0">
        <di:waypoint x="698" y="1125" />
        <di:waypoint x="780" y="1125" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="766" y="1107" width="9" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1mcl42f_di" bpmnElement="Flow_1mcl42f">
        <di:waypoint x="673" y="1150" />
        <di:waypoint x="673" y="1504" />
        <di:waypoint x="521" y="1504" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="682" y="1343" width="16" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0olpwx2_di" bpmnElement="Flow_0olpwx2">
        <di:waypoint x="278" y="1504" />
        <di:waypoint x="384" y="1504" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_12oqz9f_di" bpmnElement="Flow_12oqz9f">
        <di:waypoint x="1448" y="840" />
        <di:waypoint x="1448" y="795" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_04ptn0l_di" bpmnElement="Flow_04ptn0l">
        <di:waypoint x="1898" y="780" />
        <di:waypoint x="1964" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0trx5px_di" bpmnElement="Flow_0trx5px">
        <di:waypoint x="2215" y="780" />
        <di:waypoint x="2410" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fiu15b_di" bpmnElement="Flow_0fiu15b">
        <di:waypoint x="2190" y="755" />
        <di:waypoint x="2190" y="420" />
        <di:waypoint x="1740" y="420" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1y7ic82_di" bpmnElement="Flow_1y7ic82">
        <di:waypoint x="2190" y="805" />
        <di:waypoint x="2190" y="1650" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1vjlazp_di" bpmnElement="Flow_1vjlazp">
        <di:waypoint x="2410" y="1849" />
        <di:waypoint x="2460" y="1849" />
        <di:waypoint x="2460" y="1185" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1r102qx_di" bpmnElement="Flow_1r102qx">
        <di:waypoint x="2460" y="906" />
        <di:waypoint x="2460" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1izjnle_di" bpmnElement="Flow_1izjnle">
        <di:waypoint x="1740" y="1330" />
        <di:waypoint x="1830" y="1330" />
        <di:waypoint x="1830" y="820" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_1j8v7c9_di" bpmnElement="Flow_1j8v7c9">
        <di:waypoint x="2174" y="789" />
        <di:waypoint x="1890" y="940" />
        <di:waypoint x="1890" y="1390" />
        <di:waypoint x="910" y="1390" />
        <di:waypoint x="910" y="1170" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_03oxek0_di" bpmnElement="Flow_03oxek0">
        <di:waypoint x="2510" y="780" />
        <di:waypoint x="2592" y="780" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNEdge id="Flow_0fpzb7p_di" bpmnElement="Flow_0fpzb7p">
        <di:waypoint x="2202" y="793" />
        <di:waypoint x="2270" y="870" />
        <di:waypoint x="2332" y="870" />
      </bpmndi:BPMNEdge>
      <bpmndi:BPMNShape id="Activity_1ji7zc9_di" bpmnElement="DocumentReviewByReinsuranceManager">
        <dc:Bounds x="491" y="853" width="137" height="74" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_182t1rp_di" bpmnElement="Gateway_182t1rp_accept" isMarkerVisible="true">
        <dc:Bounds x="1423" y="745" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_055jycp_di" bpmnElement="SendEmail">
        <dc:Bounds x="1393" y="840" width="110" height="60" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000036_29B6_46cd_B86E_E24F9429BACA" bpmnElement="EAID_E0EF1BBD_BDFF_49c8_A525_3AD664140434" isMarkerVisible="true">
        <dc:Bounds x="1433" y="1120" width="42" height="42" />
        <bpmndi:BPMNLabel id="EAID_LBL000000_BDFF_49c8_A525_3AD664140434" labelStyle="EAID_LS000000_29B6_46cd_B86E_E24F9429BACA">
          <dc:Bounds x="1485" y="1131" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0rwp0dl_di" bpmnElement="Gateway_0rwp0dl" isMarkerVisible="true">
        <dc:Bounds x="1078" y="1288" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1070" y="1345" width="70" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0vxad17_di" bpmnElement="Gateway_0vxad17" isMarkerVisible="true">
        <dc:Bounds x="1078" y="1108" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="1101" y="1096" width="77" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ua77ku_di" bpmnElement="ProvidingOfferLetter">
        <dc:Bounds x="1257" y="1277" width="111" height="68" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_19adjl6_di" bpmnElement="LetterOfferReviewByReinsuranceSupervisor">
        <dc:Bounds x="1240" y="1097" width="128" height="69" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08di6xs_di" bpmnElement="DocumentReviewByReinsuranceSupervisor">
        <dc:Bounds x="780" y="1095" width="260" height="75" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_01ncjze_di" bpmnElement="Gateway_01ncjze" isMarkerVisible="true">
        <dc:Bounds x="648" y="1100" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="590" y="1093" width="79" height="14" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1ckccrh_di" bpmnElement="DocumentReviewBytechnicalManager">
        <dc:Bounds x="384" y="1468" width="137" height="72" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="EAID_DO000011_29B6_46cd_B86E_E24F9429BACA" bpmnElement="Start">
        <dc:Bounds x="248" y="1489" width="30" height="30" />
        <bpmndi:BPMNLabel id="EAID_LBL000000_F548_453e_A261_D19F7675384D" labelStyle="EAID_LS000000_29B6_46cd_B86E_E24F9429BACA">
          <dc:Bounds x="228" y="1526" width="82" height="27" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_184ac36_di" bpmnElement="Activity_184ac36">
        <dc:Bounds x="2410" y="740" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1xzndew_di" bpmnElement="Event_1xzndew">
        <dc:Bounds x="2332" y="852" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_08zo8nm_di" bpmnElement="recieveInformation">
        <dc:Bounds x="1762" y="740" width="136" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Event_1uys5pb_di" bpmnElement="Event_1uys5pb">
        <dc:Bounds x="2592" y="762" width="36" height="36" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_1k5tpbw_di" bpmnElement="Gateway_10wj7xf">
        <dc:Bounds x="2165" y="755" width="50" height="50" />
        <bpmndi:BPMNLabel>
          <dc:Bounds x="2122" y="812" width="76" height="40" />
        </bpmndi:BPMNLabel>
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1821pf8_di" bpmnElement="Activity_1821pf8" bioc:stroke="rgb(30, 136, 229)" bioc:fill="rgb(187, 222, 251)">
        <dc:Bounds x="1964" y="740" width="131" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0l8kt8e_di" bpmnElement="ReviewDocumentByManager">
        <dc:Bounds x="2385" y="906" width="149" height="88" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1vbvoao_di" bpmnElement="ReviewDocumentByBoss" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)">
        <dc:Bounds x="2385" y="1097" width="149" height="88" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0v24i5p_di" bpmnElement="Gateway_0v24i5p" isMarkerVisible="true">
        <dc:Bounds x="2295" y="1665" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1eftkv0_di" bpmnElement="AttachPolicyAndDocumentByExpert" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)">
        <dc:Bounds x="2270" y="1810" width="140" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Gateway_0ix7c4o_di" bpmnElement="Gateway_0ix7c4o" isMarkerVisible="true">
        <dc:Bounds x="1655" y="1175" width="50" height="50" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_09a6ia3_di" bpmnElement="responseEmailByExpert">
        <dc:Bounds x="1640" y="1290" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1unen90_di" bpmnElement="responseEmailByBoss">
        <dc:Bounds x="1630" y="1060" width="100" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_0y8izx0_di" bpmnElement="AttachPolicyAndDocumentByBoss" bioc:stroke="rgb(251, 140, 0)" bioc:fill="rgb(255, 224, 178)">
        <dc:Bounds x="2130" y="1650" width="120" height="80" />
      </bpmndi:BPMNShape>
      <bpmndi:BPMNShape id="Activity_1pkc9x1_di" bpmnElement="Activity_1pkc9x1">
        <dc:Bounds x="1640" y="380" width="100" height="80" />
      </bpmndi:BPMNShape>
    </bpmndi:BPMNPlane>
    <bpmndi:BPMNLabelStyle id="EAID_LS000000_29B6_46cd_B86E_E24F9429BACA">
      <dc:Font name="B Mitra" size="12" isBold="false" isItalic="false" isUnderline="false" isStrikeThrough="false" />
    </bpmndi:BPMNLabelStyle>
  </bpmndi:BPMNDiagram>
</bpmn:definitions>
